# Supabase Setup

Run the following SQL in your Supabase SQL Editor to set up the tables and security policies.

```sql
-- Create Projects Table
create table projects (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  description text not null,
  "longDescription" text,
  features text[],
  image text not null,
  gallery text[],
  tags text[],
  "demoUrl" text,
  "githubUrl" text,
  "caseStudyUrl" text
);

-- Create Profile Table (stores generic JSON config)
create table profile (
  id bigint generated by default as identity primary key,
  data jsonb not null
);

-- Create Blogs Table
create table blogs (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  excerpt text not null,
  date text not null,
  "readTime" text not null,
  slug text not null,
  link text, -- optional external URL
  content text -- optional for full blog content
);

-- Create Messages Table for Contact Form
create table messages (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text not null,
  email text not null,
  subject text not null,
  message text not null,
  is_read boolean default false
);

-- Enable RLS
alter table projects enable row level security;
alter table profile enable row level security;
alter table blogs enable row level security;
alter table messages enable row level security;

-- Policies: PUBLIC READ
create policy "Public Read Projects" on projects for select using (true);
create policy "Public Read Profile" on profile for select using (true);
create policy "Public Read Blogs" on blogs for select using (true);

-- Policies: PUBLIC INSERT for messages (Contact form)
create policy "Anonymous insert messages" on messages for insert with check (true);

-- Policies: ADMIN ALL (Only authenticated users can manage)
create policy "Admin All Projects" on projects for all using (auth.role() = 'authenticated');
create policy "Admin All Profile" on profile for all using (auth.role() = 'authenticated');
create policy "Admin All Blogs" on blogs for all using (auth.role() = 'authenticated');
create policy "Admin All Messages" on messages for all using (auth.role() = 'authenticated');
```

## Environment Variables

Add these to your `.env` file locally and in your deployment settings (Vercel/Netlify):

```
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```